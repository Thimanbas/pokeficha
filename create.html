<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar ficha</title>
    <link href="style.css" rel="stylesheet">

</head>

<body onload="hide()" id="pagina">
    <div class="cabe">
        <div class="searchbar">
            <input id="input-pokemon-name" type="text" onfocus="this.placeholder=''"
                placeholder="Pokemon name or ID..."></input>
            <button type="submit" id="search-button">
                <img src="./images/Icons/search-svgrepo-com.svg">

            </button>
        </div>
    </div>

    <div class="pre-ficha">
        <div class="question">
            <div><input id="input-trainer-name" placeholder="Nome do pokemon"></div>
            <div id="input-pre-img">
                <input type="file" accept="image/jpeg, image/png/ image/jpg" id="input-poke-img"></input>
                <label for="input-poke-img">Mude a imagem</label>
                <div crossorigin="anonymous" id="poke-image-pre"><img crossorigin="anonymous" id="pokemon-front-image-pre"></img></div>
            </div>


        </div>


        <div class="question">
            <div class="status-section">Status do seu pokemon(opcional)</div>
            <div class="status">
                <h3>V/D/A:</h3><input id="input-poke-kda" type="text" placeholder="ex: 10/2/5...">
            </div>
            <div class="status">
                <h3>Nivel:</h3><input id="input-poke-nvl" type="number">
            </div>
            <div class="status">
                <h3>Exp:</h3><input id="input-poke-exp" type="number">
            </div>
            <div class="status">
                <h3>Afeição:</h3><input id="input-poke-aff" type="number">
            </div>
            <div class="status">
                <h3>Hp:</h3><input id="input-poke-hp" type="number">
            </div>
            <div class="status">
                <h3>Attack:</h3><input id="input-poke-atk" type="number">
            </div>
            <div class="status">
                <h3>Defense: </h3><input id="input-poke-def" type="number">
            </div>
            <div class="status">
                <h3>Sp. Atk:</h3><input id="input-poke-spatk" type="number">
            </div>
            <div class="status">
                <h3>Sp. Def:</h3><input id="input-poke-spdef" type="number">
            </div>
            <div class="status">
                <h3>Speed:</h3><input id="input-poke-spe" type="number">
            </div>
            <div class="status">
                <h3>Hit:</h3><input id="input-poke-hit" type="number">
            </div>
            <div class="status">
                <h3>Dodge:</h3><input id="input-poke-ddg" type="number">
            </div>
            <div class="status">
                <h3>Critical:</h3><input id="input-poke-crt" type="number">
            </div>

        </div>


        <div class="question">
            <div class="status-section">Seu pokemon tem alguma habilidade extra?</div>
            <div id="trainer-move">
                Move:<input type="text" id="input-trainer-move-name">
                Descrição:<textarea type="text" id="input-trainer-move-desc"></textarea>
                <button type="submit" id="trainer-move-button">Adicionar</button>
            </div>
        </div>



        <div class="question">
            <table id="table-trainer-move">
                <tr>
                    <th>Move name</th>
                    <th>Descrição</th>
                </tr>
            </table>
            <div class="center">
                <button id="trainer-move-remove">Remover</button>
                <button id="trainer-move-confirm">Confirmar</button>
            </div>
        </div>


        <div class="question">
            <div class="status-section">Qual ability seu pokemon tem(opcional)</div>
            <table id="pre-ability">
                <tr>
                    <th><input type="checkbox" checked></th>
                    <th>Ability</th>
                    <th>Desc</th>
                </tr>
            </table>
        </div>

        <div id="mid-button">
            <div class="question egg-min">
                <div>
                    <div class="status-section">Seu pokemon tem Egg-Moves? </div>


                    <div id="egg-check"><input type="checkbox" id="egg-moves-check" />
                        <label for="egg-moves-check"></label>
                    </div>
                </div>
                <div>
                    <div class="nature-min">
                        <div class="status-section ">Qual a natureza do seu pokemon?(opcional)</div>
                        <form id="nature-form">
                            <select name="nature" id="nature">
                                <option value="0">Aleatório</option>
                                <option value="1">Inflexível, 1X Def</option>
                                <option value="2">Dócil,1X Sp. Def</option>
                                <option value="3">Alegre, 1X Speed</option>
                                <option value="4">Corajoso, 15% Hit</option>
                                <option value="5">Solitário, 10% Crit</option>
                                <option value="6">Cuidadoso, 1X Sp. Atk</option>
                                <option value="7">Atrevido, 15% DDG</option>
                                <option value="8">Valente, 1X Attack</option>
                                <option value="9">Tranquilo, 1X HP</option>
                            </select>

                        </form>
                    </div>
                </div>

            </div>
            <button id="generate-pokemon">Gerar</button>

        </div>

        <div class="question">
            <div class="status-section">Seu pokemon tem tipos diferentes?(opcional)</div>
            <div id="types-form">
                <form id="type-one-form">
                    Type 1:
                    <select name="type-one-select" id="type-one-select">
                        <option value="-1">Original</option>
                        <option value="0">Nenhum</option>
                        <option value="normal">Normal</option>
                        <option value="fire">Fire</option>
                        <option value="water">Water</option>
                        <option value="electric">Eletric</option>
                        <option value="grass">Grass</option>
                        <option value="ice">Ice</option>
                        <option value="fighting">Fight</option>
                        <option value="poison">Poison</option>
                        <option value="ground">Ground</option>
                        <option value="flying">Flying</option>
                        <option value="psychic">Psychic</option>
                        <option value="bug">Bug</option>
                        <option value="rock">Rock</option>
                        <option value="ghost">Ghost</option>
                        <option value="dragon">Dragon</option>
                        <option value="dark">Dark</option>
                        <option value="steel">Steel</option>
                        <option value="fairy">Fairy</option>
                    </select>

                </form>

                <form id="type-two-form">
                    Type 2:

                    <select name="type-two-select" id="type-two-select">
                        <option value="-1">Original</option>
                        <option value="0">Nenhum</option>
                        <option value="normal">Normal</option>
                        <option value="fire">Fire</option>
                        <option value="water">Water</option>
                        <option value="electric">Eletric</option>
                        <option value="grass">Grass</option>
                        <option value="ice">Ice</option>
                        <option value="fighting">Fight</option>
                        <option value="poison">Poison</option>
                        <option value="ground">Ground</option>
                        <option value="flying">Flying</option>
                        <option value="psychic">Psychic</option>
                        <option value="bug">Bug</option>
                        <option value="rock">Rock</option>
                        <option value="ghost">Ghost</option>
                        <option value="dragon">Dragon</option>
                        <option value="dark">Dark</option>
                        <option value="steel">Steel</option>
                        <option value="fairy">Fairy</option>
                    </select>

                </form>


            </div>

        </div>

    </div>








    <div class="ficha" id="ficha">


        <div class="dmg-table-class">
            <div class="damage-table">
                <div id="section-name">Damage Taken</div>
                <table id="damage-taken-table">
                    <tr>
                        <th><img src="./images/Types/NormalIC_Big.png"></th>
                        <th><img src="./images/Types/FireIC_Big.png"></th>
                        <th><img src="./images/Types/WaterIC_Big.png"></th>
                        <th><img src="./images/Types/ElectricIC_Big.png"></th>
                        <th><img src="./images/Types/GrassIC_Big.png"></th>
                        <th><img src="./images/Types/IceIC_Big.png"></th>
                        <th><img src="./images/Types/FightingIC_Big.png"></th>
                        <th><img src="./images/Types/PoisonIC_Big.png"></th>
                        <th><img src="./images/Types/GroundIC_Big.png"></th>
                        <th><img src="./images/Types/FlyingIC_Big.png"></th>
                        <th><img src="./images/Types/PsychicIC_Big.png"></th>
                        <th><img src="./images/Types/BugIC_Big.png"></th>
                        <th><img src="./images/Types/RockIC_Big.png"></th>
                        <th><img src="./images/Types/GhostIC_Big.png"></th>
                        <th><img src="./images/Types/DragonIC_Big.png"></th>
                        <th><img src="./images/Types/DarkIC_Big.png"></th>
                        <th><img src="./images/Types/SteelIC_Big.png"></th>
                        <th><img src="./images/Types/FairyIC_Big.png"></th>
                    </tr>
                    <tr id="table-damage">
                    </tr>

                </table>


            </div>
        </div>


        <div class="grid-container">


            <div class="basic-info">
                <div id="poke-name"></div>

                <div id="poke-image"></div>
                <div class="poke-info">
                    <div id="poke-trainer-name"></div>
                    <div id="poke-gender"></div>
                </div>
                <div class="poke-basic-info">
                    <div id="national-dex-n">
                        National Nº
                    </div>
                    <div class="poke-types">

                        <div id="poke-typeone-box">
                            <img id="poke-typeone" src="./images/Types/noneIC_SV.png">
                        </div>

                        <div id="poke-typetwo-box">
                            <img id="poke-typetwo" src="./images/Types/noneIC_SV.png">
                        </div>
                    </div>
                </div>

                <div class="poke-basic">
                    <div id="poke-species">Species: </div>
                    <div id="poke-height">Height: </div>
                    <div id="poke-weight">Weight: </div>
                    <div id="poke-ability">Ability: </div>
                </div>
            </div>


            <div id="status-pokemon">
                <div id="poke-kda">
                    <div> V/D/A</div>
                    <div id="kda">0/0/0</div>
                </div>
                <div id="poke-level-info">
                    <div id="poke-nvl">Nivel: 1</div>

                    <div id="poke-exp">Exp: 0</div>

                    <div id="poke-aff">Afeição: 0</div>


                </div>
                <div id="poke-status-container">
                    <div class="poke-status">

                        <div id="section-name">Base stats:</div>
                        <div id="poke-stat-container">
                            <div class="stat-ficha">
                                <div id="stat-name">Hp: </div>

                            </div>

                            <div id="stat-name">Attack: </div>
                            <div id="stat-name">Defense: </div>
                            <div id="stat-name">Sp. Atk: </div>
                            <div id="stat-name">Sp. Def: </div>
                            <div id="stat-name">Speed: </div>
                            <div id="stat-name">Total: </div>

                            <div id="poke-stat-chances">
                                <div id="hit-stat">Hit: 0%</div>
                                <div id="ddg-stat">Dodge: 0%</div>
                                <div id="crt-stat">Critical: 0%</div>
                            </div>
                        </div>


                    </div>

                </div>

            </div>


            <div id="advanced-info">

                <div class="poke-advanced-info">
                    <div id="section-name">Nature</div>

                    <div id="poke-nature">

                    </div>

                </div>

                <div id="trainer-moves">
                    <table id="trainer-moves-table">
                        <tr>
                            <th>Move</th>
                            <th>Descrição</th>
                        </tr>
                    </table>
                </div>

            </div>

        </div>



        <div class="grid-container2">
            <div class="item2">
                <div id="section-name">Level-up</div>
                <table id="poke-level-move">
                    <tr>
                        <th class="table-name">Nvl</th>
                        <th class="table-name">Type</th>
                        <th class="table-name">Class</th>
                        <th class="table-name move-name">Name</th>
                        <th class="table-name">Power</th>
                        <th class="table-name">Acc</th>
                    </tr>
                </table>
            </div>
            <div class="item5" id="egg-move-class">
                <div id="section-name">Egg-moves</div>
                <table id="poke-egg-move">
                    <tr>
                        <th class="table-name">Type</th>
                        <th class="table-name">Class</th>
                        <th class="table-name move-name">Name</th>
                        <th class="table-name">Power</th>
                        <th class="table-name">Acc</th>
                    </tr>

                </table>

            </div>
            <div class="item8">
                <div id="section-name">Tutor-moves</div>
                <div id="tutor-moves-button">
                    <button type="submit" id="tutor-confirm">Confirm</button>
                    <button type="submit" id="tutor-refresh">Refresh</button>
                </div>
                <table id="poke-tutor-move">
                    <tr>
                        <th class="table-name"><input type="checkbox" checked /></th>
                        <th class="table-name">Type</th>
                        <th class="table-name">Class</th>
                        <th class="table-name move-name">Name</th>
                        <th class="table-name">Power</th>
                        <th class="table-name">Acc</th>
                    </tr>

                </table>
            </div>
            <div class="item3">
                <div id="section-name">TM moves</div>
                <div id="tm-moves-button">
                    <button type="submit" id="tm-confirm">Confirm</button>
                    <button type="submit" id="tm-refresh">Refresh</button>
                </div>
                <table id="poke-tm-move">
                    <tr>
                        <th class="table-name"><input type="checkbox" checked /></th>
                        <th class="table-name">Type</th>
                        <th class="table-name">Class</th>
                        <th class="table-name move-name" id="tm-move-name">Name</th>
                        <th class="table-name">Power</th>
                        <th class="table-name">Acc</th>
                    </tr>
                </table>
            </div>
        </div>


    </div>

    <div id="pdf-container">
        <button onclick="geraPdf()" id="pdf-button">Gerar ficha!</button>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="createApp.js"></script>
    <script src="natures.js"></script>
    <script src="types.js"></script>
    <script src="moves.js"></script>
    <script>
        async function geraPdf() {

            var zip = new JSZip();
            var pokeTrainerName = document.getElementById("poke-trainer-name").textContent
            var pokeName = document.getElementById("poke-name").textContent
            domtoimage.toBlob(document.getElementById('ficha'))
                .then(function (imageBlob) {
                    zip.file(`${pokeTrainerName}_${pokeName}.png`, imageBlob);

                    // Baixe o HTML e adicione-o ao ZIP
                    let x = document.querySelector(".ficha");
                    x = x.outerHTML;
                    let htmlBlob = new Blob([x], { type: 'text/html' });
                    zip.file(`${pokeTrainerName}_${pokeName}.html`, htmlBlob);

                    // Gere o arquivo ZIP
                    zip.generateAsync({ type: "blob" }).then(function (content) {
                        // Crie um objeto Blob com o conteúdo ZIP
                        var blob = new Blob([content], { type: "application/zip" });

                        // Crie um URL para o arquivo ZIP
                        var url = URL.createObjectURL(blob);

                        // Crie um link para download do arquivo ZIP
                        var link = document.createElement('a');
                        link.href = url;
                        link.download = `${pokeTrainerName}_${pokeName}.zip`;

                        // Simule um clique no link para iniciar o download
                        link.click();
                    });
                });
        }
    </script>
</body>

</html>